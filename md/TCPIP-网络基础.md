# TCP/IP

***

## 层次模型

### 为什么要分层？

优点：层与层之间互不干扰，可以独立更改

缺点：冗余多，可能会在不同的层实现相同的功能

### OSI参考模型

* **应用层** 开发者可以接触到的层，附加了用于实际应用的协议：如电子邮件协议、远程登陆协议、文件传输协议
* **表示层** 用于转换网络传输格式，不同的机器数据格式不同，比如大端序和小端序之分，如编码，这一层在机器和网络之间做了转换处理
* **会话层** 两个机器交流的过程被称为一个会话，这一层用于建立、断开通信连接，并管理传输层以下的分层
* **传输层** 负责安全无误的把数据传输给对方，负责地址校验，数据校验
* **网络层**  网络传输中要经过很多服务器，这一层用来选择一条路来进行网络传输
* **数据链路层** 用于转换数据帧与比特流，负责实现每一个区间之间的通信*
* **物理层** 比特流与电子信号之间的转换，数据在这一步被传输

### 分组交换机（路由器）（蓄积交换）

路由器接收到数据以后会按照顺序缓存到相应的队列当中，再发送出去（有时也有优先级）：计算机发出的数据是分组的，路由器同时与多个计算机连接，路由器在收到这些数据之后通过数据首部了解目标地址，并且分发给相应的目标地址，以此来实现在一根线路上同时进行多个通信

### 根据接收端数量分类

* 单播：一对一通信
* 广播：一对多，电视节目
* 多播：特定一对多
* 任播：特定一对一，选择最符合条件的，如DNS根域名解析服务器

### 地址

* 唯一性：唯一识别通信目标，但通信目标可以是一个组，即多个目标 
* 层次性：快速查找定位 IP地址具有唯一性（Q：MAC地址也具有层次，但这种层次很难利用，所以MAC地址不具有层次性）

MAC如何保持唯一性？MAC地址长度48位，通常表示为12个16进制数，前六位表示网络硬件制造商编号，由IEEE分配（前两个bit表示单播/多播，全局/本地），后六位由网络硬件制造商分配

IP地址如何实现层次性？1.IP地址由网络号和主机号两部分组成2.网络号相同的主机一般集中，便于寻址

如何判断通过哪个网卡发送？MAC：地址转发表 IP：路由控制表 实际上这两张表能获取到的信息不是具体的目标地址，而是该数据应该被发送出去的网卡信息*

***

## 网络的构成要素

| 设备             | 作用                                                         |
| ---------------- | ------------------------------------------------------------ |
| 网卡             | 使计算机联网                                                 |
| 中继器           | 从物理层上延长网络，不能在传输速度不同的媒介之间转发，也并非无限延长，不做数据校验 |
| 网桥/2层交换机   | 从数据链路层上延长，做数据校验，没有连接网段的限制，又是可以连接传输速率不同的网络，通过地址自学机制和过滤功能控制网络流量，根据MAC地址 |
| 路由器/3层交换机 | 通过网络层转发分组数据，根据IP地址，可以分担网络负荷，甚至网络安全功能 |
| 4-7层交换机      | 处理传输层以上各层网络传输，比如负载均衡器，带宽控制，广域网加速器，特殊应用访问加速，防火墙 |
| 网关             | 转换协议                                                     |

***

